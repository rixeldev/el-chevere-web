---
import SectionContainer from '@/components/SectionContainer.astro'
import Contact from '@/components/sections/Contact.astro'
import Faqs from '@/components/sections/Faqs.astro'
import Footer from '@/components/sections/Footer.astro'
import { Reviews } from '@/components/sections/Reviews'
import SEO from '@/components/SEO.astro'
import BackgroundGradient from '@/components/ui/BackgroundGradient.astro'
import GoToTop from '@/components/ui/GoToTop.astro'
import Header from '@/components/ui/Header.astro'
import Toast from '@/components/ui/Toast.astro'
import WhatsAppButton from '@/components/ui/WhatsAppButton.astro'
import Star from '@/icons/Star.astro'
import type { Preload } from '@/interfaces/preload'
import { getI18N } from '@/languages/index'
import '@fontsource-variable/onest'
import Analytics from '@vercel/analytics/astro'
import { ClientRouter } from 'astro:transitions'

interface Props {
	title: string
	description: string
	preload?: Array<Preload>
	canonical?: string
	image?: string
}

const { title, description, preload, canonical, image } = Astro.props

const currentLocale = Astro.currentLocale
const i18n = getI18N({ currentLocale })
---

<!doctype html>
<html lang='es'>
	<head>
		<SEO
			canonical={canonical}
			description={description}
			image={image}
			preload={preload}
			title={title}
		/>

		<Analytics />
		<ClientRouter />
	</head>
	<body class='relative overflow-x-hidden'>
		<BackgroundGradient />

		<GoToTop />
		<WhatsAppButton />
		<Toast />

		<Header />

		<main>
			<slot />

			<SectionContainer id='faqs'>
				<Faqs />
			</SectionContainer>

			<SectionContainer id='rating'>
				<div class='flex w-full max-w-4xl flex-col md:w-11/12 lg:w-8/12'>
					<h2
						class='mb-8 flex items-center gap-x-3 text-3xl font-semibold text-primary sm:text-4xl'
					>
						<Star class='size-8' />

						{i18n.RATING}
					</h2>

					<Reviews client:visible currentLocale={currentLocale} />
				</div>
			</SectionContainer>

			<SectionContainer
				id='contact'
				class='section relative w-full bg-gradient-to-b from-back via-back/80 to-back px-4 py-20 pt-20 sm:px-6 sm:pt-24 lg:px-8 lg:pt-28'
			>
				<Contact />
			</SectionContainer>
		</main>

		<Footer />
	</body>
</html>

<style is:global>
	html {
		font-family: 'Onest Variable', 'Ubuntu', system-ui, sans-serif;
		background: linear-gradient(180deg, #0a0e27 0%, #1a1f3a 50%, #0a0e27 100%);
		scroll-behavior: smooth;
		color: #f8fafc;
	}

	body {
		background: linear-gradient(180deg, #0a0e27 0%, #1a1f3a 50%, #0a0e27 100%);
		min-height: 100vh;
	}

	code {
		font-family:
			Menlo,
			Monaco,
			Lucida Console,
			Liberation Mono,
			DejaVu Sans Mono,
			Bitstream Vera Sans Mono,
			Courier New,
			monospace;
	}

	input[type='date']::-webkit-inner-spin-button,
	input[type='date']::-webkit-calendar-picker-indicator,
	input[type='time']::-webkit-inner-spin-button,
	input[type='time']::-webkit-calendar-picker-indicator {
		cursor: pointer;
		filter: invert();
	}

	@media (prefers-reduced-motion: reduce) {
		html {
			scroll-behavior: auto;
		}
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}

	.fade-up-anim {
		animation: fade-up-animation linear both;
		animation-timeline: view();
		animation-range: entry 5% cover 25%;
	}

	@keyframes fade-up-animation {
		0% {
			opacity: 0;
			translate: 0 60px;
			scale: 0.9;
		}

		100% {
			opacity: 1;
			translate: 0 0;
			scale: 1;
		}
	}

	.fade-left-anim {
		animation: fade-left-animation linear both;
		animation-timeline: view();
		animation-range: entry 5% cover 25%;
	}

	@keyframes fade-left-animation {
		0% {
			opacity: 0;
			translate: 60px 0;
			scale: 0.9;
		}

		100% {
			opacity: 1;
			translate: 0 0;
			scale: 1;
		}
	}

	.fade-right-anim {
		animation: fade-right-animation linear both;
		animation-timeline: view();
		animation-range: entry 5% cover 25%;
	}

	@keyframes fade-right-animation {
		0% {
			opacity: 0;
			translate: -60px 0;
			scale: 0.9;
		}

		100% {
			opacity: 1;
			translate: 0 0;
			scale: 1;
		}
	}

	.mask-image {
		mask-image: linear-gradient(to bottom, #000 50%, transparent 100%);
	}

	/* Glass morphism effect */
	.glass {
		background: rgba(255, 255, 255, 0.05);
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
		border: 1px solid rgba(255, 255, 255, 0.1);
	}

	.glass-strong {
		background: rgba(255, 255, 255, 0.1);
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
		border: 1px solid rgba(255, 255, 255, 0.2);
	}

	/* Gradient text */
	.gradient-text {
		background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 50%, #8b5cf6 100%);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-clip: text;
	}

	/* Smooth transitions */
	* {
		transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
	}
</style>
